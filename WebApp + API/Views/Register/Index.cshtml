
@{
    ViewData["Title"] = "Index";
}

<title>Register</title>


<link rel="stylesheet" type="text/css" href="css/util.css">
<link rel="stylesheet" type="text/css" href="css/main.css">
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="~/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0"></script>

<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script>

    function validateEmail(email) {
    var re = /^(([^<>()[\]\\.,;:\s@@\"]+(\.[^<>()[\]\\.,;:\s@@\"]+)*)|(\".+\"))@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
    }       


    jQuery(document).ready(function () {
        $("#register").click(function () {

            console.log("click");
            url = "/api/Users/register";
            var username = document.getElementById("username").value;
            var name = document.getElementById("name").value;
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;
            var user = "NormalUser";
            var confirmpassword = document.getElementById("confirmpassword").value;
            s = '{"userName": "' + username + '","userPassword": "' + password + '","userEmail": "' + email + '","name": "' + name + '","userRole" : "' + user + '" }';
            
            if (username == "" || name == "" || email == "" || password == "" || confirmpassword == "") {
                alert("Please fill in all inputs.")
            }
            else {
                if (password != confirmpassword) {
                    alert("Passwords are not the same")
                }
                else {
                    if (validateEmail(email)) {
                        callback = function (data) {
                            alert("User Registered,Please login.");
                            console.log(data["name"])
                            window.location.href = "@Url.Action("Index", "Home")";
                        };
                        callbackerror = function (data) { alert("Error"); };
                        $.ajax({
                            type: "POST",
                            url: url,
                            data: s,
                            success: callback,
                            error: callbackerror,
                            processData: false,
                            contentType: 'application/json'

                        });
                    }
                    else {
                        alert("Email format is invalid")
                    }
                }
            }
            
        });
    });


</script>

<div class="limiter">
    <div class="container-login100">
        <div class="wrap-login100">
            <form class="login100-form validate-form p-l-55 p-r-55 p-t-178">
                <span class="login100-form-title">
                    Register
                </span>

                <div class="wrap-input100 validate-input m-b-16" data-validate="Please enter username">
                    <input id="username" class="input100" type="text" name="username" placeholder="Username">
                    <span class="focus-input100"></span>
                </div>
                <div class="wrap-input100 validate-input m-b-16" data-validate="Please enter your name">
                    <input id="name" class="input100" type="text" name="name" placeholder="Name">
                    <span class="focus-input100"></span>
                </div>
                <div class="wrap-input100 validate-input m-b-16" data-validate="Please enter your email">
                    <input id="email" class="input100" type="email" name="name" placeholder="Email">
                    <span class="focus-input100"></span>
                </div>
                <div class="wrap-input100 validate-input m-b-16" data-validate="Please enter password">
                    <input id="password" class="input100" type="password" name="pass" placeholder="Password">
                    <span class="focus-input100"></span>
                </div>
                <div class="wrap-input100 validate-input m-b-16" data-validate="Please reenter your password">
                    <input id="confirmpassword" class="input100" type="password" name="pass" placeholder="Confirm Password">
                    <span class="focus-input100"></span>
                </div>
                <div class="container-login100-form-btn">
                    <br />
                    <input class="login100-form-btn" href="" id="register" value="Register">
                </div>

                <div class="flex-col-c p-t-170 p-b-40">
                    <span class="txt1 p-b-9">
                        Already have an account?
                    </span>

                    <a asp-area="" asp-controller="Login" asp-action="Index" class="txt3">
                        Login now
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
<!--===============================================================================================-->
<script src="/lib/jquery/dist/jquery.js"></script>
<script src="/lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0"></script>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/daterangepicker/moment.min.js"></script>
<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
<script src="js/main.js"></script>



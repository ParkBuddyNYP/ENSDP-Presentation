
@{
    ViewData["Title"] = "Index";
}

<title>Login</title>


<link rel="stylesheet" type="text/css" href="css/util.css">
<link rel="stylesheet" type="text/css" href="css/main.css">
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="~/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0"></script>

<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script>


    jQuery(document).ready(function () {
        $("#login").click(function () {

            console.log("click");
            url = "/api/Users/authenticate";
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            s = '{"userName": "' + username + '","userPassword": "' + password + '"}';
            callback = function (data) {
                alert("User Logged In.");
                sessionStorage.setItem("token", data["token"]);
                sessionStorage.setItem("name", data["name"]);
                sessionStorage.setItem("role", data["userRole"]);
                sessionStorage.setItem("company", data["userCompany"]);
                console.log(data["name"])
                console.log(sessionStorage.getItem("company").toString())
                window.location.href = "@Url.Action("Index", "Home")";
            };
            callbackerror = function (data) { alert("Error"); };
            $.ajax({
                type: "POST",
                url: url,
                data: s,
                success: callback,
                error: callbackerror,
                processData: false,
                contentType: 'application/json'

            });
        });
    });


</script>

<div class="limiter">
    <div class="container-login100">
        <div class="wrap-login100">
            <form class="login100-form validate-form p-l-55 p-r-55 p-t-178">
                <span class="login100-form-title">
                    Sign In
                </span>

                <div class="wrap-input100 validate-input m-b-16" data-validate="Please enter username">
                    <input id="username" class="input100" type="text" name="username" placeholder="Username">
                    <span class="focus-input100"></span>
                </div>

                <div class="wrap-input100 validate-input" data-validate="Please enter password">
                    <input id="password" class="input100" type="password" name="pass" placeholder="Password">
                    <span class="focus-input100"></span>
                </div>

                <div class="text-right p-t-13 p-b-23">
                    <span class="txt1">
                        Forgot
                    </span>

                    <a href="#" class="txt2">
                        Username / Password?
                    </a>
                </div>

                <div class="container-login100-form-btn">
                    <a class="login100-form-btn" href="#" id="login">Sign in</a>
                </div>

                <div class="flex-col-c p-t-170 p-b-40">
                    <span class="txt1 p-b-9">
                        Don’t have an account?
                    </span>

                    <a asp-area="" asp-controller="Register" asp-action="Index" class="txt3">
                        Sign up now
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
<!--===============================================================================================-->
<script src="/lib/jquery/dist/jquery.js"></script>
<script src="/lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0"></script>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/daterangepicker/moment.min.js"></script>
<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
<script src="js/main.js"></script>
